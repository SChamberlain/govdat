rsunlight
======

```{r echo=FALSE}
knitr::opts_chunk$set(
  warning = FALSE,
  message = FALSE,
  collapse = TRUE,
  comment = "#>",
  fig.path = "inst/img/"
)
```

[![Build Status](https://api.travis-ci.org/rOpenGov/rsunlight.png)](https://travis-ci.org/rOpenGov/rsunlight)
[![Build status](https://ci.appveyor.com/api/projects/status/ytc2qdo3u2t3ltm6/branch/master)](https://ci.appveyor.com/project/sckott/rsunlight)
[![codecov.io](https://codecov.io/github/rOpenGov/rsunlight/coverage.svg?branch=master)](https://codecov.io/github/rOpenGov/rsunlight?branch=master)
[![rstudio mirror downloads](http://cranlogs.r-pkg.org/badges/grand-total/rsunlight)](https://github.com/metacran/cranlogs.app)
[![cran version](http://www.r-pkg.org/badges/version/rsunlight)](https://cran.r-project.org/package=rsunlight)




__UPDATE: Sunlight is going bye bye - Some services have moved to Propublica, while others I'll look into.__




+ Maintainer: [Scott Chamberlain](https://github.com/sckott/)
+ License: [MIT](http://opensource.org/licenses/MIT)
+ Report any problems in the [Issues Tracker](https://github.com/ropengov/rsunlight/issues), or just fork and submit changes, etc.


## Description

> NOTE: Capitol Words API is defunct

`rsunlight` is a collection of functions to search and acquire data from the various Sunlight Labs APIs for government data, at [http://sunlightfoundation.com/api/](http://sunlightfoundation.com/api/), some of which are maintained now by ProPublica

`rsunlight` wraps functions in APIs for:

* Congress API (`cg`) - Run by Propublica
* Open States API (`os`)

Functions that wrap these sets of APIs will be prefixed by `cg`, `os`, or `cw` for the different methods listed above:

* `cg` + `fxn`
* `os` + `fxn`

where `fxn` would be a function to a interface with a specific Sunlight Foundation API.

* Get an Open States API key at <https://openstates.org/api/register/> - Store as
`OPEN_STATES_KEY`

We set up the functions so that you can use either env vars, or R options. For env
vars, put an entry in your `.Renviron` file with the name `SUNLIGHT_LABS_KEY`,
so the full thing would be `SUNLIGHT_LABS_KEY=<key>`. For R options, put the key in
your `.Rprofile` file like `options(SunlightLabsKey = "key")`. Both are called
on R startup, and then you don't have to enter your API key for each run of a function.

## Install rsunlight

From CRAN

```{r eval=FALSE}
install.packages("rsunlight")
```

Or development version from Github

```{r eval=FALSE}
devtools::install_github("ropengov/rsunlight")
```

```{r}
library("rsunlight")
```

## Congress API

### Get districts for a latitude/longitude.

```{r}
cg_districts(latitude = 35.778788, longitude = -78.787805)
```

### Search congress people and senate members.

```{r}
out <- cg_legislators(last_name = 'Reed')
```

## Open States API

### Bill Search

Search for bills with the term _agriculture_, in Texas, and in the upper chamber.

```{r}
os_billsearch(terms = 'agriculture', state = 'tx', chamber = 'upper')
```

### Legislator Search

Search for Republican legislators in Nevada

```{r}
os_legislatorsearch(state = 'nv', party = 'republican')
```
